resource "aws_iam_role" "lambda_exec_role" {
  name = "lambda_execution_role"

  assume_role_policy = jsonencode(
     {
  "Version": "2012-10-17",
  "Statement": [
    # {
    #   "Effect": "Allow",
    #   "Action": [
    #     "s3:CreateBucket",
    #     "s3:DeleteBucket",
    #     "s3:GetBucket*",
    #     "s3:PutBucket*",
    #     "s3:ListBucket",
    #     "s3:PutBucketNotification",
    #     "s3:GetBucketNotification"
    #   ],
    #   "Resource": "*"
    # }
    {
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetBucketNotification",
        "s3:PutBucketNotification",
        "s3:GetBucketPublicAccessBlock",
        "s3:PutBucketPublicAccessBlock",
        "s3:GetBucketAcl",
        "s3:PutBucketAcl",
        "s3:GetBucketPolicy",
        "s3:PutBucketPolicy"
      ],
      "Resource": [
        "arn:aws:s3:::my-lambda-bucket-22825",
        "arn:aws:s3:::my-lambda-bucket-22825/*"
      ]
    }
  ]
}

  ]
}

  #   {
  #   Version = "2012-10-17"
  #   Statement = [{
  #     Action = "sts:AssumeRole"
  #     Effect = "Allow"
  #     Principal = {
  #       Service = "lambda.amazonaws.com" # only lambda can use this role
  #     }
  #   }]
  # }
#   {
#   "Version": "2012-10-17",
#   "Statement": [
#     {
#       "Effect": "Allow",
#       "Action": [
#         "s3:CreateBucket",
#         "s3:DeleteBucket",
#         "s3:GetBucketNotification",
#         "s3:PutBucketNotification",
#         "s3:GetBucketPublicAccessBlock",
#         "s3:PutBucketPublicAccessBlock",
#         "s3:GetBucketPolicy",
#         "s3:PutBucketPolicy"

#         "s3:CreateBucket",
#         "s3:DeleteBucket",
#         "s3:GetBucket*",
#         "s3:PutBucket*",
#         "s3:ListBucket",
#         "s3:PutBucketNotification",
#         "s3:GetBucketNotification"
#       ],
#       "Resource": "*"
#     },
#     {
#       "Effect": "Allow",
#       "Action": [
#         "lambda:*"
#       ],
#       "Resource": "*"
#     },
#     {
#       "Effect": "Allow",
#       "Action": [
#         "iam:PassRole",
#         "iam:CreateRole",
#         "iam:AttachRolePolicy"
#       ],
#       "Resource": "*"
#     }
#   ]
# }

  )
}